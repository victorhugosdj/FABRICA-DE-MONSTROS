<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gerenciador de Trabalho</title>
  <meta name="description"
    content="Dashboard semanal de gerenciamento de tarefas com produtividade, filtros e exportaÃ§Ã£o." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ======= HEADER ======= -->
  <header class="header glass">
    <div class="header-content">
      <div class="header-left">
        <div class="logo">
          <span class="logo-icon">âš¡</span>
          <span class="logo-text" id="teamName">Minha Equipe</span>
          <button class="btn-icon" id="editTeamBtn" title="Editar nome">âœï¸</button>
        </div>
      </div>
      <div class="header-center">
        <div class="live-indicator">
          <span class="live-dot"></span>
          <span id="teamTitle" class="team-title">Gerenciador de Tarefas ğŸš€</span>
        </div>
        <div id="currentDate" class="current-date"></div>
        <!-- Indicador de Status Online -->
        <div class="online-status" id="onlineStatus">
          <div class="online-avatars" id="onlineAvatars"></div>
          <span class="online-count" id="onlineCount">0 online</span>
        </div>
      </div>
      <div class="header-right">
        <div id="syncIndicator" class="sync-indicator" title="Sincronizado com a nuvem">â˜ï¸</div>
        <div id="liveClock" class="live-clock"></div>
        <button class="btn-icon theme-toggle" id="themeToggle" title="Alternar tema">ğŸŒ™</button>
        <button class="btn-icon" id="logoutBtn" title="Sair">ğŸšª</button>
      </div>
    </div>
  </header>

  <div class="main-wrapper">

    <!-- ======= STATS BAR ======= -->
    <section class="stats-bar">
      <div class="stat-card glass">
        <div class="stat-value" id="statTotal">0</div>
        <div class="stat-label">Total</div>
      </div>
      <div class="stat-card glass">
        <div class="stat-value" id="statDone">0</div>
        <div class="stat-label">ConcluÃ­das</div>
      </div>
      <div class="stat-card glass">
        <div class="stat-value" id="statPending">0</div>
        <div class="stat-label">Pendentes</div>
      </div>
      <div class="stat-card stat-card--highlight">
        <div class="stat-value" id="statProductivity">0%</div>
        <div class="stat-label">Produtividade</div>
      </div>
    </section>

    <!-- ======= PERFORMANCE SECTION (Rings & Progress) ======= -->
    <section class="performance-section">
      <!-- Member Filter Bar (NOVO LUGAR) -->
      <div class="member-filters-wrap glass">
        <div class="section-title">ğŸ‘¥ MEMBROS DA EQUIPE</div>
        <div class="member-filters" id="memberFilters">
          <!-- Generated by JS -->
        </div>
      </div>

      <!-- Link removed: day-rings-row -->

      <!-- Overall Weekly Progress Bar -->
      <div class="weekly-progress-card glass">
        <div class="weekly-progress-header">
          <span class="weekly-progress-title">ğŸ“ˆ Progresso Semanal Geral</span>
          <span class="weekly-pct" id="weeklyPct">0%</span>
        </div>
        <div class="weekly-progress-track">
          <div class="weekly-progress-fill" id="weeklyProgressFill"></div>
        </div>
      </div>
    </section>

    <!-- ======= FILTERS & ACTIONS ======= -->
    <section class="filters-bar glass">
      <div class="filter-left">
        <button class="filter-btn active" data-filter="all" id="btnAll">ğŸ—‚ï¸ Todas</button>
        <button class="filter-btn" data-view="team" id="btnTeamTasks">ğŸ‘¥ Equipe</button>
        <button class="filter-btn" data-view="mine" id="btnMyTasks">ğŸ‘¤ Minhas</button>
      </div>
      <div class="filter-center">
        <div class="search-wrap">
          <span class="search-icon">ğŸ”</span>
          <input type="text" id="searchInput" class="search-input" placeholder="Buscar tarefa..." />
        </div>
      </div>
      <div class="filter-right">
        <button class="btn-action" id="activityBtn">ğŸ“œ Log</button>
        <button class="btn-action" id="notifBtn">ğŸ”” NotificaÃ§Ãµes</button>
        <button class="btn-action" id="exportBtn">ğŸ“¤ Exportar</button>
        <button class="btn-action" id="importBtnTrigger">ğŸ“¥ Importar</button>
        <input type="file" id="importInput" accept=".json" style="display:none" />
      </div>
    </section>

    <!-- ======= ADD TASK ROW ======= -->
    <section class="add-task-bar glass">
      <input type="text" id="taskInput" class="task-name-input"
        placeholder="Nova tarefa...  (Enter ou Ctrl+Enter para adicionar)" />
      <select id="taskDay" class="task-select"></select>
      <select id="taskPeriod" class="task-select">
        <option value="manha">ManhÃ£ ğŸŒ…</option>
        <option value="tarde">Tarde ğŸŒ¤ï¸</option>
        <option value="noite">Noite ğŸŒ™</option>
      </select>
      <select id="taskCategory" class="task-select">
        <option value="Geral">ğŸ“ Geral</option>
        <option value="ReuniÃ£o">ğŸ¤ ReuniÃ£o</option>
        <option value="Projeto">ğŸ’» Projeto</option>
        <option value="Estudo">ğŸ“š Estudo</option>
        <option value="Pessoal">ğŸ  Pessoal</option>
      </select>
      <select id="taskPriority" class="task-select">
        <option value="urgent">ğŸ”¥ Urgente</option>
        <option value="medium">ğŸ“Œ MÃ©dia</option>
        <option value="light">ğŸŒ¿ Leve</option>
      </select>
      <div class="time-range">
        <input type="time" id="timeStart" class="task-time" />
        <span class="time-sep">atÃ©</span>
        <input type="time" id="timeEnd" class="task-time" />
      </div>
      <button class="btn-schedule" id="addTaskBtn">Agendar</button>
      <select id="taskMember" class="task-select">
        <!-- Members generated by JS -->
      </select>
    </section>

    <!-- ======= WEEKLY GRID ======= -->
    <section class="week-grid-wrap">
      <div class="week-grid" id="weekGrid">
        <!-- Dynamically generated by JS -->
      </div>
    </section>

    <!-- Activity Sidebar (Fixed) -->
    <aside class="activity-sidebar glass hidden" id="activitySidebar">
      <div class="sidebar-header">
        <h3>ğŸ“œ Log de Atividade</h3>
        <button class="btn-icon" id="closeSidebar">âœ•</button>
      </div>
      <div class="activity-list" id="activityList">
        <!-- Generated by JS -->
      </div>
    </aside>
  </div>

  <!-- ======= TOAST CONTAINER ======= -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- ======= EDIT TEAM MODAL ======= -->
  <div id="teamModal" class="modal-overlay hidden">
    <div class="modal glass">
      <h2>âœï¸ Editar Nome da Equipe</h2>
      <input type="text" id="teamNameInput" class="modal-input" placeholder="Nome da equipe..." maxlength="40" />
      <div class="modal-title-input-wrap">
        <input type="text" id="teamTitleInput" class="modal-input" placeholder="TÃ­tulo / subtÃ­tulo..." maxlength="50" />
      </div>
      <div class="modal-actions">
        <button class="btn-schedule" id="saveTeamBtn">Salvar</button>
        <button class="btn-action" id="cancelTeamBtn">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- ======= NOTIFICATIONS MODAL ======= -->
  <div id="notifModal" class="modal-overlay hidden">
    <div class="modal glass notif-modal">
      <div class="modal-header">
        <h2>ğŸ”” NotificaÃ§Ãµes</h2>
        <button class="btn-icon" id="closeNotifBtn">âœ•</button>
      </div>
      <div id="notifList" class="notif-list">
        <p class="notif-empty">Sem notificaÃ§Ãµes no momento.</p>
      </div>
      <div class="modal-actions">
        <button class="btn-action" id="clearNotifBtn">Limpar tudo</button>
      </div>
    </div>
    <!-- ======= LOGIN/SIGNUP MODAL ======= -->
    <div id="loginModal" class="modal-overlay login-overlay">
      <div class="modal glass login-card">
        <div id="loginSection">
          <div class="login-logo">âš¡</div>
          <h2>Entrar no Painel</h2>
          <p>Acesse seu gerenciador colaborativo.</p>
          <input type="text" id="loginUsername" class="modal-input" placeholder="Seu nome..." maxlength="30" />
          <input type="password" id="loginPassword" class="modal-input" placeholder="Sua senha..." />
          <button class="btn-schedule" style="width:100%; margin-top:15px;" id="loginBtn">Entrar</button>
          <p class="auth-switch">NÃ£o tem conta? <button id="switchToSignup">Cadastre-se</button></p>
        </div>

        <div id="signupSection" class="hidden">
          <div class="login-logo">âœ¨</div>
          <h2>Criar Nova Conta</h2>
          <p>Defina seu perfil na equipe.</p>
          <input type="text" id="signupUsername" class="modal-input" placeholder="Nome / Apelido..." maxlength="30" />
          <input type="password" id="signupPassword" class="modal-input" placeholder="Crie uma senha..." />

          <div class="color-picker-wrap">
            <label>Cor de PreferÃªncia:</label>
            <div class="color-options">
              <button class="color-opt active" data-color="#4F6EF7" style="background:#4F6EF7"></button>
              <button class="color-opt" data-color="#FF9F43" style="background:#FF9F43"></button>
              <button class="color-opt" data-color="#26de81" style="background:#26de81"></button>
              <button class="color-opt" data-color="#FF5757" style="background:#FF5757"></button>
              <button class="color-opt" data-color="#7B93FF" style="background:#7B93FF"></button>
              <button class="color-opt" data-color="#BDC3C7" style="background:#BDC3C7"></button>
            </div>
            <input type="hidden" id="signupColor" value="#4F6EF7" />
          </div>

          <button class="btn-schedule" style="width:100%; margin-top:15px;" id="signupBtn">Criar Conta</button>
          <p class="auth-switch">JÃ¡ tem conta? <button id="switchToLogin">Fazer Login</button></p>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
</body>

</html>